<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Controller.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">PopNames3111</a> &gt; <a href="index.source.html" class="el_package">comp3111.popnames</a> &gt; <span class="el_source">Controller.java</span></div><h1>Controller.java</h1><pre class="source lang-java linenums">/**
 * Building on the sample skeleton for 'ui.fxml' COntroller Class generated by SceneBuilder 
 */
package comp3111.popnames;

import java.util.*;
import java.util.Map.Entry;

import javafx.fxml.FXML;
import javafx.fxml.FXMLLoader;
import javafx.scene.Scene;
import javafx.scene.control.Button;
import javafx.scene.control.Tab;
import javafx.scene.control.TableColumn;
import javafx.scene.control.TableColumn.CellDataFeatures;
import javafx.scene.control.TableView;
import javafx.scene.control.TextArea;
import javafx.scene.control.TextField;
import javafx.scene.control.TextInputControl;
import javafx.scene.control.ToggleGroup;
import javafx.scene.control.RadioButton;
import javafx.scene.layout.Pane;
import javafx.stage.Stage;
import javafx.util.Callback;
import javafx.util.Pair;

<span class="fc" id="L27">public class Controller {</span>

    @FXML
    private Tab tabTaskZero;

    @FXML
    private TextField textfieldNameF;

    @FXML
    private TextField textfieldYear;

    @FXML
    private Button buttonRankM;

    @FXML
    private TextField textfieldNameM;

    @FXML
    private Button buttonRankF;

    @FXML
    private Button buttonTopM;

    @FXML
    private Button buttonTopF;

    @FXML
    private Button buttonSummary;
    
    @FXML
    private Tab tabReport1;

    @FXML
    private TextField textFieldTopN1;

    @FXML
    private RadioButton radioMale1;

    @FXML
    private RadioButton radioFemale1;

    @FXML
    private TextField textFieldTo1;

    @FXML
    private TextField textFieldFrom1;
    
    @FXML
    private ToggleGroup T1;

    @FXML
    private Tab tabReport2;
    
    @FXML
    private TextField textFieldName;
    
    @FXML
    private RadioButton radioMale2;

    @FXML
    private RadioButton radioFemale2;

    @FXML
    private TextField textFieldTo2;

    @FXML
    private TextField textFieldFrom2;

    @FXML
    private ToggleGroup T11;

    @FXML
    private Tab tabReport3;
    
    @FXML
    private TextField textFieldTopN3;
    
    @FXML
    private RadioButton radioMale3;

    @FXML
    private RadioButton radioFemale3;

    @FXML
    private TextField textFieldTo3;

    @FXML
    private TextField textFieldFrom3;

    @FXML
    private ToggleGroup T111;

    @FXML
    private Tab tabApp1;
    
    @FXML
    private TextField textFieldDadName;

    @FXML
    private TextField textFieldMomName;

    @FXML
    private TextField textFieldDadYOB;

    @FXML
    private TextField textFieldMomYOB;

    @FXML
    private RadioButton radioWithVin;

    @FXML
    private ToggleGroup isWithVin;

    @FXML
    private RadioButton radioWithoutVin;

    @FXML
    private TextField textFieldVin;

    @FXML
    private Button buttonGetRecom;

    @FXML
    private Tab tabApp2;
    
    @FXML
    private TextField textFieldYourName;
    
    @FXML
    private TextField textFieldYOB;
           
    @FXML
    private ToggleGroup TyourGender;
    
    @FXML
    private ToggleGroup TmateGender;
    
    @FXML
    private ToggleGroup Tpreference;
    
    @FXML
    private RadioButton radioYouMale;
    
    @FXML
    private RadioButton radioYouFemale;
    
    @FXML
    private RadioButton radioMateMale;
    
    @FXML
    private RadioButton radioMateFemale;
    
    @FXML
    private RadioButton radioYoung;
    
    @FXML
    private RadioButton radioOld;
    
    @FXML
    private Button buttonRecommend;

    @FXML
    private Tab tabApp3;
    
    @FXML
    private TextField textFieldiName;

    @FXML
    private RadioButton radioiMale;

    @FXML
    private RadioButton radioiFemale;
    
    @FXML
    private ToggleGroup iGender;

    @FXML
    private TextField textFieldiYOB;

    @FXML
    private TextField textFieldiNameMate;

    @FXML
    private RadioButton radioiMaleMate;

    @FXML
    private RadioButton radioiFemaleMate;
    
    @FXML
    private ToggleGroup iGenderMate;

    @FXML
    private RadioButton radioYounger;
    
    @FXML
    private RadioButton radioOlder;
    
    @FXML
    private ToggleGroup iPreference;



    @FXML
    private Button buttonGetScore;


    @FXML
    private TextArea textAreaConsole;


    
    
    boolean verifyInputNotEmpty(TextInputControl ... cs) {
<span class="fc" id="L240">    	boolean result = true;</span>
<span class="fc bfc" id="L241" title="All 2 branches covered.">    	for (TextInputControl c : cs) {</span>
<span class="pc bpc" id="L242" title="1 of 2 branches missed.">    		if (c.getText().trim().isEmpty()) {</span>
<span class="nc" id="L243">    			result = false;</span>
<span class="nc" id="L244">    			break;</span>
    		}
    	}
<span class="fc" id="L247">    	return result;</span>
    }
    
    boolean verifyYearInRange(int ... is) {
<span class="fc" id="L251">    	boolean result = true;</span>
<span class="fc bfc" id="L252" title="All 2 branches covered.">    	for (int i : is) {</span>
<span class="pc bpc" id="L253" title="2 of 4 branches missed.">    		if (i &gt; AnalyzeNames.MAX_YEAR || i &lt; AnalyzeNames.MIN_YEAR) {</span>
<span class="nc" id="L254">    			result = false;</span>
<span class="nc" id="L255">    			break;</span>
    		}
    	}
<span class="fc" id="L258">    	return result;</span>
    }

    String displayTable(TableView&lt;?&gt; table, String oReport) {
    	try {
<span class="fc" id="L263">	    	FXMLLoader loader = new FXMLLoader();</span>
<span class="fc" id="L264">	    	loader.setLocation(getClass().getResource(&quot;/table.fxml&quot;));</span>
<span class="fc" id="L265">	   		Pane root = (Pane) loader.load();</span>
<span class="fc" id="L266">	   		table.prefWidthProperty().bind(root.widthProperty());</span>
<span class="fc" id="L267">	   		table.prefHeightProperty().bind(root.heightProperty());</span>
<span class="fc" id="L268">			root.getChildren().add(table);</span>
<span class="fc" id="L269">	   		Scene scene = new Scene(root);</span>
<span class="fc" id="L270">	   		Stage stage = new Stage();</span>
<span class="fc" id="L271">	   		stage.setScene(scene);</span>
<span class="fc" id="L272">	   		stage.setTitle(&quot;Report&quot;);</span>
<span class="fc" id="L273">	   		stage.show();</span>
<span class="nc" id="L274">    	} catch(Exception e) {</span>
<span class="nc" id="L275">    		oReport += &quot;Error: Cannot Display Table. Please contact the developer if this message is seen.&quot;;</span>
<span class="fc" id="L276">    	}</span>
<span class="fc" id="L277">    	return oReport;</span>
    }
    
    /**
     *  Task Zero
     *  To be triggered by the &quot;Summary&quot; button on the Task Zero Tab 
     *  
     */
    @FXML
    void doSummary() {
<span class="nc" id="L287">    	int year = Integer.parseInt(textfieldYear.getText());</span>
<span class="nc" id="L288">    	String oReport = AnalyzeNames.getSummary(year);</span>
<span class="nc" id="L289">    	textAreaConsole.setText(oReport);</span>
<span class="nc" id="L290">    }</span>

  
    /**
     *  Task Zero
     *  To be triggered by the &quot;Rank (female)&quot; button on the Task Zero Tab
     *  
     */
    @FXML
    void doRankF() {
<span class="fc" id="L300">    	String oReport = &quot;&quot;;</span>
<span class="fc" id="L301">    	String iNameF = textfieldNameF.getText();</span>
<span class="fc" id="L302">    	int iYear = Integer.parseInt(textfieldYear.getText());</span>
<span class="fc" id="L303">    	int oRank = AnalyzeNames.getRank(iYear, iNameF, &quot;F&quot;);</span>
<span class="pc bpc" id="L304" title="1 of 2 branches missed.">    	if (oRank == -1)</span>
<span class="nc" id="L305">    		oReport = String.format(&quot;The name %s (female) has not been ranked in the year %d.\n&quot;, iNameF, iYear);</span>
    	else
<span class="fc" id="L307">    		oReport = String.format(&quot;Rank of %s (female) in year %d is #%d.\n&quot;, iNameF, iYear, oRank);</span>
<span class="fc" id="L308">    	textAreaConsole.setText(oReport);</span>
<span class="fc" id="L309">    }</span>

  
    /**
     *  Task Zero
     *  To be triggered by the &quot;Rank (male)&quot; button on the Task Zero Tab
     *  
     */
    @FXML
    void doRankM() {
<span class="fc" id="L319">    	String oReport = &quot;&quot;;</span>
<span class="fc" id="L320">    	String iNameM = textfieldNameM.getText();</span>
<span class="fc" id="L321">    	int iYear = Integer.parseInt(textfieldYear.getText());</span>
<span class="fc" id="L322">    	int oRank = AnalyzeNames.getRank(iYear, iNameM, &quot;M&quot;);</span>
<span class="pc bpc" id="L323" title="1 of 2 branches missed.">    	if (oRank == -1)</span>
<span class="nc" id="L324">    		oReport = String.format(&quot;The name %s (male) has not been ranked in the year %d.\n&quot;, iNameM, iYear);</span>
    	else
<span class="fc" id="L326">    		oReport = String.format(&quot;Rank of %s (male) in year %d is #%d.\n&quot;, iNameM, iYear, oRank);</span>
<span class="fc" id="L327">    	textAreaConsole.setText(oReport);</span>
<span class="fc" id="L328">    }</span>


    /**
     *  Task Zero
     *  To be triggered by the &quot;Top 5 (female)&quot; button on the Task Zero Tab
     *  
     */
    @FXML
    void doTopF() {
<span class="nc" id="L338">    	String oReport = &quot;&quot;;</span>
<span class="nc" id="L339">    	final int topN = 5;</span>
<span class="nc" id="L340">    	int iYear = Integer.parseInt(textfieldYear.getText());</span>
<span class="nc" id="L341">    	oReport = String.format(&quot;Top %d most popular names (female) in the year %d:\n&quot;, topN, iYear);</span>
<span class="nc bnc" id="L342" title="All 2 branches missed.">    	for (int i=1; i&lt;=topN; i++)</span>
<span class="nc" id="L343">    		oReport += String.format(&quot;#%d: %s\n&quot;, i, AnalyzeNames.getName(iYear, i, &quot;F&quot;));</span>
<span class="nc" id="L344">    	textAreaConsole.setText(oReport);</span>
<span class="nc" id="L345">    }</span>


    /**
     *  Task Zero
     *  To be triggered by the &quot;Top 5 (male)&quot; button on the Task Zero Tab
     *  
     */
    @FXML
    void doTopM() {
<span class="nc" id="L355">    	String oReport = &quot;&quot;;</span>
<span class="nc" id="L356">    	final int topN = 5;</span>
<span class="nc" id="L357">    	int iYear = Integer.parseInt(textfieldYear.getText());</span>
<span class="nc" id="L358">    	oReport = String.format(&quot;Top %d most popular names (male) in the year %d:\n&quot;, topN, iYear);</span>
<span class="nc bnc" id="L359" title="All 2 branches missed.">    	for (int i=1; i&lt;=topN; i++)</span>
<span class="nc" id="L360">    		oReport += String.format(&quot;#%d: %s\n&quot;, i, AnalyzeNames.getName(iYear, i, &quot;M&quot;));</span>
<span class="nc" id="L361">    	textAreaConsole.setText(oReport);</span>
<span class="nc" id="L362">    }</span>
    
    /**
     * Task One
     * To be triggered by the &quot;Report&quot; button on the Task One (Reporting 1) Tab
     * 
     */
    @FXML
    void reportTopNames() {
<span class="fc" id="L371">    	String oReport = &quot;&quot;;</span>
    	
<span class="pc bpc" id="L373" title="1 of 2 branches missed.">    	if (verifyInputNotEmpty(textFieldTopN1, textFieldFrom1, textFieldTo1)) {</span>
	    	try {
	    		// Initialize values
<span class="fc" id="L376">		    	int topN = Integer.parseInt(textFieldTopN1.getText());</span>
<span class="fc" id="L377">		    	RadioButton selected = (RadioButton) T1.getSelectedToggle();</span>
<span class="fc" id="L378">		    	String gender = Character.toString(selected.getText().charAt(0));</span>
<span class="fc" id="L379">		    	int yearFrom = Integer.parseInt(textFieldFrom1.getText());</span>
<span class="fc" id="L380">		    	int yearTo = Integer.parseInt(textFieldTo1.getText());</span>
		    	
<span class="pc bpc" id="L382" title="1 of 2 branches missed.">		    	if (topN &gt;= 1) {</span>
<span class="pc bpc" id="L383" title="2 of 4 branches missed.">			    	if (verifyYearInRange(yearFrom, yearTo) &amp;&amp; yearFrom &lt; yearTo) {</span>
<span class="fc" id="L384">			    		int maxRank = AnalyzeNames.getMaxRankInPeriod(yearFrom, yearTo, gender);</span>
<span class="pc bpc" id="L385" title="1 of 2 branches missed.">			    		if (topN &lt;= maxRank) {</span>
			    			// Initialize the table
<span class="fc" id="L387">				    		List&lt;String&gt; tableColumnNames = new ArrayList&lt;&gt;();</span>
<span class="fc bfc" id="L388" title="All 2 branches covered.">				    		for (int i=0; i&lt;=topN; i++)</span>
<span class="fc bfc" id="L389" title="All 2 branches covered.">				    			tableColumnNames.add(i == 0 ? &quot;Year&quot; : String.format(&quot;Top %d&quot;, i));</span>
<span class="fc" id="L390">				    		TableWrapper table = new TableWrapper(tableColumnNames);</span>
					   		
					   		// Deal with data
<span class="fc bfc" id="L393" title="All 2 branches covered.">							for (int year=yearFrom; year&lt;=yearTo; year++) {			</span>
<span class="fc" id="L394">								List&lt;String&gt; names = new ArrayList&lt;&gt;();</span>
<span class="fc" id="L395">								names.add(Integer.toString(year));</span>
								
<span class="fc bfc" id="L397" title="All 2 branches covered.">								for (int i=1; i&lt;=topN; i++) {</span>
									// add items to the table
<span class="fc" id="L399">									String name = AnalyzeNames.getName(year, i, gender);</span>
<span class="fc" id="L400">									names.add(name);</span>
								}
<span class="fc" id="L402">								table.addRow(names);</span>
							}
							
							// display the table
<span class="fc" id="L406">							oReport = displayTable(table.getTable(), oReport);</span>
					    	
							// Compute the name with most top spots
<span class="fc" id="L409">					    	Entry&lt;String, Integer&gt; maxNameCount = AnalyzeNames.getMaxNameCount(yearFrom, yearTo, gender);</span>
					    	
<span class="fc" id="L411">					    	oReport += String.format(&quot;Over the period %d to %d, %s for %s has hold the top spot most often for a total of %d times.\n&quot;, </span>
<span class="fc" id="L412">					    			yearFrom, yearTo, maxNameCount.getKey(), selected.getText().toLowerCase(), maxNameCount.getValue());</span>
<span class="fc" id="L413">			    		} else {</span>
<span class="nc" id="L414">			    			oReport += String.format(&quot;Error: TopN Value Too Large. Please make sure your input topN value is not larger than %d. \n&quot;, maxRank);</span>
			    		}
<span class="fc" id="L416">			    	} else {</span>
<span class="nc" id="L417">			    		oReport += &quot;Error: Year Out of Range. Please check your input years.\n&quot;;</span>
			    	}
		    	} else {
<span class="nc" id="L420">		    		oReport += &quot;Error: Non-positive TopN. Please check your input topN value.\n&quot;;</span>
		    	}
<span class="fc" id="L422">		    } catch (Exception e) {</span>
<span class="fc" id="L423">				oReport += &quot;Error: Invalid Input. Please check your input values.\n&quot;;</span>
<span class="fc" id="L424">			}</span>
		} else {
<span class="nc" id="L426">			oReport += &quot;Error: Empty Input. Please fill in all the text fields.\n&quot;;</span>
		}
    	
    	// Show summary and error messages in the console
<span class="fc" id="L430">    	textAreaConsole.setText(oReport);</span>
<span class="fc" id="L431">    }</span>
    
    /**
     * Task Two
     * To be triggered by the &quot;Report&quot; button on the Task Two (Reporting 2) Tab
     * 
     */
    @FXML
    void reportNamePopularity() 
    {
<span class="fc" id="L441">    	String oReport = &quot;&quot;;</span>
<span class="pc bpc" id="L442" title="1 of 2 branches missed.">    	if (verifyInputNotEmpty(textFieldName, textFieldFrom2, textFieldTo2)) </span>
    	{
	    	try 
	    	{
	    		// Initialize values
<span class="fc" id="L447">	    		String name = textFieldName.getText();</span>
		    	//String name = String.parseString(textFieldName.getText());
<span class="fc" id="L449">		    	RadioButton selected = (RadioButton) T11.getSelectedToggle();</span>
<span class="fc" id="L450">		    	String gender = Character.toString(selected.getText().charAt(0));</span>
<span class="fc" id="L451">		    	int yearFrom = Integer.parseInt(textFieldFrom2.getText());</span>
<span class="fc" id="L452">		    	int yearTo = Integer.parseInt(textFieldTo2.getText());</span>
		    	
<span class="pc bpc" id="L454" title="2 of 4 branches missed.">		    	if (verifyYearInRange(yearFrom, yearTo) &amp;&amp; yearFrom &lt; yearTo) </span>
		    	{
<span class="pc bpc" id="L456" title="1 of 2 branches missed.">		    		if(yearFrom&gt;yearTo)</span>
<span class="nc" id="L457">		    			oReport +=&quot;Invalid year range. Lower bound year should not be larger than upper bound year.&quot;;</span>
		    		else
		    		{
		    		// Initialize the table
<span class="fc" id="L461">	    			String tableColumnNames[] = {&quot;Year&quot;, &quot;Rank&quot;,&quot;Count&quot;,&quot;Percentage&quot;};</span>
<span class="fc" id="L462">		    		TableWrapper table = new TableWrapper(Arrays.asList(tableColumnNames));</span>
			   		
			   		// Deal with data
			   		
<span class="fc bfc" id="L466" title="All 2 branches covered.">					for (int year=yearFrom; year&lt;=yearTo; year++) </span>
					{
						// add items to the table
<span class="fc" id="L469">						List&lt;String&gt; popularity = new ArrayList&lt;&gt;();</span>
<span class="fc" id="L470">						popularity.add(Integer.toString(year));</span>
						
<span class="fc" id="L472">						int rank=AnalyzeNames.getRank(year, name, gender);</span>
<span class="fc" id="L473">						popularity.add(Integer.toString(rank));</span>
					
<span class="fc" id="L475">						int count=AnalyzeNames.getNameCount(year, name, gender);</span>
<span class="fc" id="L476">						popularity.add(Integer.toString(count));</span>
							
<span class="fc" id="L478">						double percentage=AnalyzeNames.getNamePercentage(year, name, gender);;</span>
<span class="fc" id="L479">						popularity.add(Double.toString(percentage));</span>
		
<span class="fc" id="L481">						table.addRow(popularity);</span>
					}
					
					// display the table
<span class="fc" id="L485">					oReport = displayTable(table.getTable(), oReport);</span>
			    								    	
<span class="fc" id="L487">			    	int mostPopularYear=AnalyzeNames.getMostPopularYear(yearFrom, yearTo, name, gender);</span>
			    	
			    	
<span class="fc" id="L490">			    	oReport += String.format(&quot;In the year %d, the number of birth with name %s is %d, which represents %.2f percent of total %s births in %d.\nThe year when the name %s was most popular is %d.\nIn that year, the number of births is %d, which represents %.2f percent of the total %s birth in %d.\n&quot;, </span>
<span class="fc" id="L491">			    			 yearTo, name, AnalyzeNames.getNameCount(yearTo, name, gender), </span>
<span class="fc" id="L492">			    			 AnalyzeNames.getNamePercentage(yearTo, name, gender), selected.getText(), yearTo, name, mostPopularYear, </span>
<span class="fc" id="L493">			    			 AnalyzeNames.getNameCount(mostPopularYear, name, gender), </span>
<span class="fc" id="L494">			    			 AnalyzeNames.getNamePercentage(mostPopularYear, name, gender), gender, mostPopularYear);</span>
			    	
<span class="fc" id="L496">		    		}</span>
		    	}
		    	else 
		    	{
<span class="nc" id="L500">		    		oReport += &quot;Error: Year Out of Range. Please check your input years.\n&quot;;</span>
		    	}
<span class="fc" id="L502">		    } catch (Exception e) </span>
	    	{
<span class="fc" id="L504">				oReport += &quot;Error: Invalid Input. Please check your input values.\n&quot;;</span>
<span class="fc" id="L505">			}</span>
		} 
    	else 
		{
<span class="nc" id="L509">			oReport += &quot;Error: Empty Input. Please fill in all the text fields.\n&quot;;</span>
		}
    	
    	// Show summary and error messages in the console
<span class="fc" id="L513">    	textAreaConsole.setText(oReport);</span>
<span class="fc" id="L514">    }</span>

    /**
     * Task Three
     * To be triggered by the &quot;Report&quot; button on the Task Three (Reporting 3) Tab
     * 
     */
    @FXML
    void reportNameTrend() {
<span class="fc" id="L523">    	String oReport = &quot;&quot;;</span>
    	
<span class="pc bpc" id="L525" title="1 of 2 branches missed.">    	if (verifyInputNotEmpty(textFieldTopN3, textFieldFrom3, textFieldTo3)) {</span>
	    	try {
	    		// Initialize values
<span class="fc" id="L528">	    		int topN = Integer.parseInt(textFieldTopN3.getText());</span>
<span class="fc" id="L529">		    	RadioButton selected = (RadioButton) T111.getSelectedToggle();</span>
<span class="fc" id="L530">		    	String gender = Character.toString(selected.getText().charAt(0));</span>
<span class="fc" id="L531">		    	int yearFrom = Integer.parseInt(textFieldFrom3.getText());</span>
<span class="fc" id="L532">		    	int yearTo = Integer.parseInt(textFieldTo3.getText());</span>
<span class="pc bpc" id="L533" title="1 of 2 branches missed.">		    	if (topN &gt;= 1) {</span>
<span class="pc bpc" id="L534" title="2 of 4 branches missed.">			    	if (verifyYearInRange(yearFrom, yearTo) &amp;&amp; yearFrom &lt; yearTo) {</span>
<span class="fc" id="L535">			    		int maxRank = AnalyzeNames.getMaxRankInPeriod(yearFrom, yearTo, gender);</span>
<span class="pc bpc" id="L536" title="1 of 2 branches missed.">			    		if (topN &lt;= maxRank) {</span>
			    			// Initialize the table
				    		
<span class="fc" id="L539">				    		String tableColumnNames[] = {&quot;Name&quot;, &quot;Lowest Rank\n[in year]&quot;, &quot;Highest Rank\n [in year]&quot;, &quot;Trend&quot;};</span>
<span class="fc" id="L540">				    		TableWrapper table = new TableWrapper(Arrays.asList(tableColumnNames));</span>
					   		
					   		// Deal with data
<span class="fc" id="L543">					   		List&lt;String&gt; finalNames = new ArrayList&lt;&gt;();</span>
							
							// loop through all years for each name in name list
<span class="fc bfc" id="L546" title="All 2 branches covered.">							for (int i = 0; i &lt; topN; i++) {</span>
<span class="fc" id="L547">								String name = AnalyzeNames.getName(yearFrom, i+1, gender);</span>
<span class="fc" id="L548">								int result[] = AnalyzeNames.getHighAndLowRank(yearFrom, yearTo, name, gender);</span>
<span class="fc" id="L549">								int hiRank = result[0];</span>
<span class="fc" id="L550">								int hiYear = result[1];</span>
<span class="fc" id="L551">								int loRank = result[2];</span>
<span class="fc" id="L552">								int loYear = result[3];</span>
								// add items to the table
<span class="pc bpc" id="L554" title="1 of 4 branches missed.">								if (loRank &lt;= topN &amp;&amp; loRank != -1) {</span>
<span class="fc" id="L555">									List&lt;String&gt; row = new ArrayList&lt;&gt;();</span>
<span class="fc" id="L556">									row.add(name);</span>
<span class="fc" id="L557">									row.add(Integer.toString(loRank)+&quot;\n&quot;+&quot;[&quot;+ Integer.toString(loYear)+&quot;]&quot;);</span>
<span class="fc" id="L558">									row.add(Integer.toString(hiRank)+&quot;\n&quot;+&quot;[&quot;+ Integer.toString(hiYear)+&quot;]&quot;);</span>
<span class="fc bfc" id="L559" title="All 2 branches covered.">									if (hiYear == loYear)</span>
<span class="fc" id="L560">										row.add(&quot;FLAT&quot;);</span>
<span class="fc bfc" id="L561" title="All 2 branches covered.">									else if(hiYear &gt; loYear)</span>
<span class="fc" id="L562">										row.add(&quot;UP&quot;);</span>
									else
<span class="fc" id="L564">										row.add(&quot;DOWN&quot;);</span>
											
<span class="fc" id="L566">									table.addRow(row);</span>
<span class="fc" id="L567">									finalNames.add(name);</span>
								}
							}
							
<span class="pc bpc" id="L571" title="1 of 2 branches missed.">							if (finalNames.isEmpty()) {</span>
<span class="nc" id="L572">								oReport += String.format(&quot;Over the period %d to %d, no name maintained a high level of popularity within Top %d. \n&quot;, </span>
<span class="nc" id="L573">						    			yearFrom, yearTo, topN) ;</span>
							} else {
								// display the table
<span class="fc" id="L576">								oReport = displayTable(table.getTable(), oReport);</span>
								
<span class="fc" id="L578">								oReport += String.format(&quot;Over the period %d to %d, the %d names below maintained a high level of popularity within Top %d. \n&quot;, </span>
<span class="fc" id="L579">										yearFrom, yearTo, finalNames.size(), topN) ;</span>
<span class="fc bfc" id="L580" title="All 2 branches covered.">								for (String name : finalNames )</span>
<span class="fc" id="L581">									oReport += name+&quot;\n&quot;;					</span>
							}
<span class="fc" id="L583">			    		} else {</span>
<span class="nc" id="L584">			    			oReport += String.format(&quot;Error: TopN Value Too Large. Please make sure your input topN value is not larger than %d. \n&quot;, maxRank);</span>
			    		}	
<span class="fc" id="L586">			    	} else {</span>
<span class="nc" id="L587">			    		oReport += &quot;Error: Invalid Period. Please check your input years.\n&quot;;</span>
			    	}
		    	} else {
<span class="nc" id="L590">		    		oReport += &quot;Error: Invalid Top N. Please check your input Top N.\n&quot;;</span>
		    	}
<span class="fc" id="L592">		    } catch (Exception e) {</span>
<span class="fc" id="L593">				oReport += &quot;Error: Invalid Input. Please check your input values.\n&quot;;</span>
<span class="fc" id="L594">			}</span>
		} else {
<span class="nc" id="L596">			oReport += &quot;Error: Empty Input. Please fill in all the text fields.\n&quot;;</span>
		}
    	
    	// Show summary and error messages in the console
<span class="fc" id="L600">    	textAreaConsole.setText(oReport);</span>
<span class="fc" id="L601">    }</span>


    /**
     * Task Four
     * To be triggered by the &quot;Get Recommendation&quot; button on the Task Four (Application 4) Tab
     * 
     */
    @FXML
    void disableVin() {
<span class="nc" id="L611">    	textFieldVin.setDisable(true);</span>
<span class="nc" id="L612">    }</span>
    
    @FXML
    void enableVin() {
<span class="nc" id="L616">    	textFieldVin.setDisable(false);</span>
<span class="nc" id="L617">    }</span>
    
    @FXML
    void getRecommendedBabyName() {
<span class="fc" id="L621">    	String oReport = &quot;&quot;;</span>
    	
<span class="pc bpc" id="L623" title="1 of 2 branches missed.">    	if (verifyInputNotEmpty(textFieldDadName, textFieldDadYOB, textFieldMomName, textFieldMomYOB)</span>
<span class="pc bpc" id="L624" title="2 of 4 branches missed.">    			&amp;&amp; (radioWithoutVin.isSelected() || verifyInputNotEmpty(textFieldVin))) {</span>
			try {
				// Initialize values
<span class="fc" id="L627">				String dadName = textFieldDadName.getText();</span>
<span class="fc" id="L628">				String momName = textFieldMomName.getText();</span>
<span class="fc" id="L629">				int dadYOB = Integer.parseInt(textFieldDadYOB.getText());</span>
<span class="fc" id="L630">				int momYOB = Integer.parseInt(textFieldMomYOB.getText());	</span>
				int vintageYear;
<span class="pc bpc" id="L632" title="1 of 2 branches missed.">				if (radioWithVin.isSelected())</span>
<span class="fc" id="L633">					vintageYear = Integer.parseInt(textFieldVin.getText());</span>
				else
<span class="nc" id="L635">					vintageYear = 2019;</span>
				
<span class="pc bpc" id="L637" title="1 of 2 branches missed.">				if (verifyYearInRange(dadYOB, momYOB, vintageYear)) {</span>
					// Compute recommended names
<span class="fc" id="L639">					Pair&lt;String, String&gt; namePair = AnalyzeNames.recommendBabyName(dadName, dadYOB, momName, momYOB, vintageYear);</span>
<span class="fc" id="L640">					String boyName = namePair.getKey();</span>
<span class="fc" id="L641">					String girlName = namePair.getValue();</span>
					
<span class="fc" id="L643">					oReport = String.format(&quot;Boy name: %s\nGirl name: %s\n&quot;, boyName, girlName);</span>
<span class="fc" id="L644">				} else {</span>
<span class="nc" id="L645">					oReport += &quot;Error: Year Out of Range. Please check your input years.\n&quot;;</span>
				}
<span class="fc" id="L647">			} catch (Exception e) {</span>
<span class="fc" id="L648">				oReport += &quot;Error: Invalid Input. Please check your input values.\n&quot;;</span>
<span class="fc" id="L649">			}</span>
    	} else {
<span class="nc" id="L651">    		oReport += &quot;Error: Empty Input. Please fill in all the text fields.\n&quot;;</span>
    	}
    	
<span class="fc" id="L654">    	textAreaConsole.setText(oReport);</span>
<span class="fc" id="L655">    }</span>


/**
 * Task Five
 * To be triggered by the &quot;Get Recommendation&quot; button on the Task Five (Application 5) Tab
 * 
 */
@FXML
void getRecommendedMateName() 
{
<span class="fc" id="L666">	String oReport = &quot;&quot;;</span>
	
<span class="pc bpc" id="L668" title="1 of 2 branches missed.">	if (verifyInputNotEmpty(textFieldYourName, textFieldYOB))</span>
	{		
		try {
			// Initialize values
<span class="fc" id="L672">			String yourName = textFieldYourName.getText();</span>
<span class="fc" id="L673">			int YOB = Integer.parseInt(textFieldYOB.getText());</span>
<span class="fc" id="L674">			RadioButton ySelected = (RadioButton) TyourGender.getSelectedToggle();</span>
<span class="fc" id="L675">			RadioButton mSelected = (RadioButton) TmateGender.getSelectedToggle();</span>
<span class="fc" id="L676">			RadioButton pSelected = (RadioButton) Tpreference.getSelectedToggle();</span>
<span class="fc" id="L677">			String yourGender = Character.toString(ySelected.getText().charAt(0));</span>
<span class="fc" id="L678">			String mateGender = Character.toString(mSelected.getText().charAt(0));</span>
<span class="fc" id="L679">			String preference = pSelected.getText();</span>
						
<span class="pc bpc" id="L681" title="1 of 2 branches missed.">			if (verifyYearInRange(YOB)) </span>
			{
				// Compute recommended names
<span class="fc" id="L684">				String mateName = AnalyzeNames.recommendedMateName(yourName, YOB, yourGender, mateGender, preference);		</span>
<span class="fc" id="L685">				oReport = String.format(&quot;Recommended mate name: %s\n&quot;, mateName);</span>
<span class="fc" id="L686">			} </span>
			else 
			{
<span class="nc" id="L689">				oReport += &quot;Error: Year Out of Range. Please check your input years.\n&quot;;</span>
			}
		} 
<span class="fc" id="L692">		catch (Exception e) </span>
		{
<span class="fc" id="L694">			oReport += &quot;Error: Invalid Input. Please check your input values.\n&quot;;</span>
<span class="fc" id="L695">		}</span>
	} 
	else 
	{
<span class="nc" id="L699">		oReport += &quot;Error: Empty Input. Please fill in all the text fields.\n&quot;;</span>
	}
	
<span class="fc" id="L702">	textAreaConsole.setText(oReport);</span>
<span class="fc" id="L703">}</span>


/**
 * Task Six
 * To be triggered by the &quot;Get Score&quot; button on the Task Six (Application 6) Tab
 * 
 */

    @FXML
    void getCompalibaleScore() {
<span class="fc" id="L714">    	String oReport = &quot;&quot;;</span>
    	
<span class="pc bpc" id="L716" title="1 of 2 branches missed.">    	if (verifyInputNotEmpty(textFieldiName, textFieldiYOB, textFieldiNameMate)) {</span>
			try {
				// Initialize values
<span class="fc" id="L719">				String iName = textFieldiName.getText();</span>
<span class="fc" id="L720">				String iNameMate = textFieldiNameMate.getText();</span>
<span class="fc" id="L721">				int iYOB = Integer.parseInt(textFieldiYOB.getText());	</span>
<span class="fc" id="L722">				RadioButton iGenderSelected = (RadioButton) iGender.getSelectedToggle();</span>
<span class="fc" id="L723">		    	String igender = Character.toString(iGenderSelected.getText().charAt(0));</span>
<span class="fc" id="L724">		    	RadioButton iGenderMateSelected = (RadioButton) iGenderMate.getSelectedToggle();</span>
<span class="fc" id="L725">		    	String igenderMate = Character.toString(iGenderMateSelected.getText().charAt(0));</span>
<span class="fc" id="L726">				RadioButton iPreferenceSelected = (RadioButton) iPreference.getSelectedToggle();</span>
<span class="fc" id="L727">		    	String ipreference = iPreferenceSelected.getText();</span>
<span class="fc" id="L728">		    	int oYOB = iYOB;</span>
<span class="pc bpc" id="L729" title="1 of 2 branches missed.">			    if (ipreference.equals(&quot;Younger&quot;))</span>
<span class="fc" id="L730">			    	oYOB = iYOB + 1;</span>
<span class="nc bnc" id="L731" title="All 2 branches missed.">				else if (ipreference.equals(&quot;Older&quot;))</span>
<span class="nc" id="L732">					oYOB = iYOB - 1;</span>
<span class="pc bpc" id="L733" title="1 of 2 branches missed.">			    if (verifyYearInRange(iYOB)) {</span>
<span class="pc bpc" id="L734" title="1 of 2 branches missed.">			    	if (verifyYearInRange(oYOB)) {</span>
						// Compute score
<span class="fc" id="L736">						float score = AnalyzeNames.compatibleScore(iName, igender, iYOB, iNameMate, igenderMate, oYOB);</span>

<span class="fc" id="L738">						oReport = String.format(&quot;The compatible score for %s and %s is %f %%.&quot;, iName, iNameMate, score*100);</span>
						
<span class="fc" id="L740">					} </span>
			    	else {
<span class="nc" id="L742">						oReport += &quot;Error: Your preferred mate age is not supported. Please check your input year and preference.\n&quot;;</span>
					}
				}
			    else {
<span class="nc" id="L746">					oReport += &quot;Error: Year Out of Range. Please check your input year.\n&quot;;</span>
			    }
<span class="fc" id="L748">			} catch (Exception e) {</span>
<span class="fc" id="L749">				oReport += &quot;Error: Invalid Input. Please check your input values.\n&quot;;</span>
<span class="fc" id="L750">			}</span>
    	} else {
<span class="nc" id="L752">    		oReport += &quot;Error: Empty Input. Please fill in all the text fields.\n&quot;;</span>
    	}
    	
<span class="fc" id="L755">    	textAreaConsole.setText(oReport);</span>
<span class="fc" id="L756">    }</span>
    
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.5.201910111838</span></div></body></html>